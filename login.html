<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>login Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css" />
</head>

<body style="background-color: #17171c;">
    <center>
        <h1>Welcome to our app</h1>
    </center>
    <div class="container d-flex justify-content-center align-items-center" style="min-height: 100vh;">

        <div class="row">
            <div class="col-md-6">
                <img src="./registerpageimg.png" style="width: 100%; height: auto; max-height: 500px;">
            </div>
            <div class="col-md-6">
                <div class="card p-4" style="background-color: #1c1c1e; border-radius: 12px; color: white;">

                    <form class="formclass">
                        <div class="mb-3">
                            <label for="username" class="form-label">User name:</label>
                            <input type="text" class="form-control" id="username">
                        </div>


                        <div class="mb-4">
                            <label for="password" class="form-label">password:</label>
                            <input type="password" class="form-control" id="password">
                        </div>


                     <center><button type="button" onclick="loginUser()">
    Continue
</button></center>


                        <p class="text-center">or</p>


                        <button type="button" class="btn btn-outline-light w-100 mb-2" onclick="loginSuccess()">
                            Continue with google
                        </button>


                        <button type="button" class="btn btn-outline-light w-100 mb-2" onclick="loginSuccess()">
                            Continue with apple
                        </button>

                        <button type="button" class="btn btn-outline-light w-100 mb-2" onclick="loginSuccess()">
                            Continue with telegram
                        </button>

                    </form>
                </div>
            </div>
        </div>
    </div>
    <script>
function loginUser() {
    const username = document.getElementById("username").value.trim();
    const password = document.getElementById("password").value.trim();
    

    if (!username || !password) {
        alert("Please enter username and password");
        return;
    }

    fetch("http://localhost:8080/api/users/login", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ username, password })
    })
    .then(async res => {
        const result = await res.text();
        if (res.status === 200 && result.trim() === "SUCCESS") {
            localStorage.setItem("name", username);
            alert("Login Successful");
            window.location.href = "./page.html";
            
            
        } else {
            alert("Invalid Username or Password");
        }
    })
    .catch(err => {
        console.error(err);
        alert("Server error. Try again later.");
    });
}
function loginSuccess() {
    alert("Login Successful");
    window.location.href = "./page.html";
} 

</script>

</body>

</html>